<div class="content-wrapper">
    <section class="content">
        <div class="container-fluid">
            <div class="block-header">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <ul class="breadcrumb">
                            <!-- <li class="breadcrumb-item">
                                <h4 class="page-title">PO Department Head Tracker</h4>
                            </li> -->
                            <li class="breadcrumb-item bcrumb-1">
                                <a href="../../Dashboard">
                                    <i class="fa fa-home"></i> Home</a>
                            </li>
                            <li class="breadcrumb-item active">P2P Team Approval</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="row clearfix">
                <div class="col-12">
    
                   
    
                    <div class="card">
                        <form #myform="ngForm">
                            <div>
                                <!-- header -->
                                <h4 class="header d-flex justify-content-between">
                        
                                    {{cardTitle}}

                                    <div  [hidden]="!boolPoreqList" (click)="list();">                       
                                        Back                 
                                        <!-- <i  class="fa fa-hand-o-right" (click)="list();"></i>    !-->
                                 </div>
                                
                                </h4>
                              
                                <!-- header end -->
                                <div class="body">
                                                            
                                    <div [hidden]="boolPoreqList">
                                        <table id="tableExport" class="display table table-hover table-checkable order-column m-t-20 width-per-100">
                                            <thead>
                                                <tr class="bg-light-gray2">
                                                    <th id="fontsize">PRF Number</th>                    
                                                    <th id="fontsize">Requirement Date</th>
                                                    <th id="fontsize">Department</th>
                                                    <th id="fontsize">Purpose</th>
                                                    <th id="fontsize">PurchaseCategory</th>
                                                    <!-- <th>Status</th> -->
                                                    <th id="fontsize" style="text-align: center;">Edit</th>
                                                    <!-- <th id="fontsize" style="text-align: center;">Delete</th> -->
                                                </tr>
                                            </thead>
                        
                                            <tbody>    
                                                <ng-container *ngFor="let porequirement of porequirementdetail">
                                                    <tr>
                                                        <td>{{porequirement.prf_number}}</td>
                                                        <td>{{porequirement.requirement_date}}</td>
                                                        <td>{{porequirement.department}}</td>
                                                        <td>{{porequirement.purpose}}</td>
                                                        <td>{{porequirement.purchase_catagory}}</td>          
                                                        <!-- <td><span class="label label-warning">{{porequirement.po_status}}</span></td>                                                                     -->
                                                        <td  style="text-align: center;" (click)="ShowPorequirementdetail(porequirement)">
                                                            <i class=" fa fa-eye font-medium-3 mr-2 text-info"></i>
                                                        </td>
                                                    </tr>
                                                </ng-container>                                     
                                            </tbody>
                                        </table>
                        
                                    </div>
                                    
                                    <div [hidden]="!boolPoreqList">
                                            <div class="row">                    
                                                <div class="form-group col-md-4 mb-2">
                                                    <table>
                                                        <tr class="pad-14">
                                                            <th class="pad-14">
                                                            <label for="userinput2">PRF No</label>
                                                        </th>
                                                        <th class="pad-14">
                                                            {{objporeq.prf_number}}   
                                                        </th>
                                                    </tr>
                                                    <tr>
                                                        <th class="pad-14">
                                                        <label for="userinput2">Requirement Date</label>
                                                    </th>
                                                    <th class="pad-14">
                                                        {{objporeq.requirement_date}}
                                                    </th>
                                                </tr>
                                                <tr><th class="pad-14">
                                                    <label for="userinput2">Department</label>
                                                </th>
                                                <th class="pad-14">
                                                    {{objporeq.department}}
                                                </th>
                                            </tr>
                                                    </table>
                                                                                                        
                                                     
                                                </div>
                                                    <div class="form-group col-md-4 mb-2">
                                                        <table>
                                                            <tr class="pad-14">
                                                                <th class="pad-14">
                                                                <label for="userinput2">Reporting Manager</label>
                                                            </th>
                                                            <th class="pad-14">
                                                                {{objporeq.reporting_manager}}   
                                                            </th>
                                                        </tr>
                                                        <tr>
                                                            <th class="pad-14">
                                                            <label for="userinput2">Purpose</label>
                                                        </th>
                                                        <th class="pad-14">
                                                            {{objporeq.purpose}}
                                                        </th>
                                                    </tr>
                                                    <tr><th class="pad-14">
                                                        <label for="userinput2">Purchase Category</label>
                                                    </th>
                                                    <th class="pad-14">
                                                        {{objporeq.purchase_catagory}}
                                                    </th>
                                                </tr>
                                                        </table>
                                                                                                            
                                                         
                                                    </div>
                                                    <div class="form-group col-md-4 mb-2">
                                                        <table>
                                                            <tr>
                                                                <th class="pad-14">
                                                                <label for="userinput2">Type of Purchase</label>
                                                            </th>
                                                            <th class="pad-14">
                                                                {{objporeq.purchase_type}}   
                                                            </th>
                                                        </tr>
                                                        <tr><th class="pad-14">
                                                            <label for="userinput2">Location</label>
                                                        </th>
                                                        <th class="pad-14">
                                                            {{objporeq.location}}
                                                        </th>
                                                    </tr>
                                                    <tr><th class="pad-14">
                                                        <label for="userinput2">Budgeted</label>
                                                    </th>
                                                    <th class="pad-14">
                                                        {{objporeq.is_budgeted}}
                                                    </th>
                                                </tr>
                                                        </table>
                                                      
                                                    </div>
                                                    <div class="form-group col-md-4 mb-2">
                                                        <table>
                                                            <tr><th class="pad-14">
                                                                <label for="userinput2">Date of Delivery Expected</label>
                                                            </th>
                                                            <th class="pad-14">
                                                                {{objporeq.date_of_delivery_expected}}   
                                                            </th>
                                                        </tr>
                                                        <tr><th class="pad-14">
                                                            <label for="userinput2">Delivery Address</label>
                                                        </th>
                                                        <th class="pad-14">
                                                            {{objporeq.delivery_address}}
                                                        </th>
                                                    </tr>
                                                        </table>
                                                      
                                                    </div>
                                                    <div class="form-group col-md-4 mb-2">
                                                        <table>
                                                            <tr><th class="pad-14">
                                                                <label for="userinput2">PaymentTerm</label>
                                                            </th>
                                                            <th class="pad-14">
                                                                {{objporeq.payment_term}}   
                                                            </th>
                                                        </tr>
                                                        <tr><th class="pad-14">
                                                            <label for="userinput2">perceived Benefits</label>
                                                        </th>
                                                        <th class="pad-14">
                                                            {{objporeq.perceived_benefits}}
                                                        </th>
                                                    </tr>
                                                    <tr><th class="pad-14">
                                                        <label for="userinput2">PO Doc</label>
                                                    </th>
                                                    <th class="pad-14">
                                                        <!-- {{objporeq.po_file_name}} -->
                                                        <a class="text-primary cursor-pointer" href="{{CS.getUploadedFileNativePath()}}{{objporeq.po_file_name}}" target="_blank">{{objporeq.po_file_name}}</a>
                                                    </th>
                                                </tr>
                                                        </table>                                                          
                                                    </div>                                                  
                                                  
                                                </div>      
                                              
                                                <div class="row pad-14">
                                                        <table class="table table-striped table-bordered">
                                                                <thead>
                                                                        <tr class="bg-light-gray2">
                                                                                <th class="th-sm">
                                                                                        Material/Service Name
                                                                                </th>
                                                                                <th class="th-sm">
                                                                                        Description
                                                                                </th>
                                                                                <th class="th-sm">
                                                                                    Budget Category
                                                                            </th>
                                                                                <th class="th-sm">
                                                                                        Quantity
                                                                                </th>
                                                                                <th class="th-sm">
                                                                                        Approx Unit Value
                                                                                </th>
                                                                                <th class="th-sm">
                                                                                        Approx Total Value
                                                                                </th>
                                                                        </tr>
                                                                </thead>
                                                                <tbody>
                                                                        <tr
                                                                                *ngFor="let cost of porequirmentDetails; let i = index">
                                                                                <td>                                                                              
                                                                                        {{cost.material_name}}
                                                                                             
                                                                                </td>
                                                                                <td>{{cost.line_description}}
                                                                                      
                                                                                </td>
                                                                                <td>
                                                                                    {{cost.budget_category}}
                                                                                </td>
                                                                                <td>                                                                              
                                                                                        {{cost.quantity}}                                                                                          
                                                                                </td>
        
                                                                                <td>
                                                                                    {{cost.unit_value}}                                                                                            
                                                                                </td>
                                                                                <td>
                                                                                    {{cost.total_value}}                                                                                            
                                                                                </td>
                                                                                
                                                                        </tr>
                                                                       
                                                                </tbody>
                                                        </table>
                                                </div>
                                                <div class="row">                    
                                                    <ul class="nav nav-pills justify-content-end margin-bottom" *ngFor="let poqutation of porequirmenttab; let i = index">
                                                        <li class="nav-item"> <a href="#poqutation_{{i}}" (click)="showselected(i)" class="nav-link" data-toggle="tab" aria-expanded="false">Quotation{{i+1}} </a> </li>
                                                        <!-- <li class="nav-item"> <a href="#navpills2-2" class="nav-link" data-toggle="tab" aria-expanded="false">Tab Two</a> </li>
                                                        <li class="nav-item"> <a href="#navpills2-3" class="nav-link" data-toggle="tab" aria-expanded="true">Tab Three</a> </li> -->
                                                    </ul>
                                                    <div class="tab-content" *ngFor="let poqutation of porequirmenttab; let i = index">
                                                        <div id="poqutation_{{i}}" *ngIf="showSelected==i" class="tab-pane">
                                                            <div class="row">
                                                            <div class="form-group col-md-4 mb-2 ">
                                                                <table>
                                                                    <tr class="pad-14">
                                                                        <th class="pad-14">
                                                                        <label for="userinput2">Vendor Type</label>
                                                                    </th>
                                                                    <th class="pad-14">
                                                                        {{poqutation.vendor_type}}   
                                                                    </th>
                                                                </tr>
                                                                <tr>
                                                                    <th class="pad-14">
                                                                    <label for="userinput2">Vendor Name</label>
                                                                </th>
                                                                <th class="pad-14">
                                                                    {{poqutation.vendor_name}} 
                                                                </th>
                                                            </tr>
                                                            <tr><th class="pad-14">
                                                                <label for="userinput2">Vendor Code</label>
                                                            </th>
                                                            <th class="pad-14">
                                                                {{poqutation.vendor_code}}
                                                            </th>
                                                        </tr>
                                                                </table>
                                                                                                                    
                                                                
                                                            </div>
                                                                <div class="form-group col-md-4 mb-2">
                                                                    <table>
                                                                        <tr class="pad-14">
                                                                            <th class="pad-14">
                                                                            <label for="userinput2">Vendor Location</label>
                                                                        </th>
                                                                        <th class="pad-14">
                                                                            {{poqutation.vendor_location}}   
                                                                        </th>
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="pad-14">
                                                                        <label for="userinput2">Vendor Address</label>
                                                                    </th>
                                                                    <th class="pad-14">
                                                                        {{poqutation.vendor_address}}
                                                                    </th>
                                                                </tr>
                                                                <tr><th class="pad-14">
                                                                    <label for="userinput2">Vendor GST Number</label>
                                                                </th>
                                                                <th class="pad-14">
                                                                    {{poqutation.gst_number}}
                                                                </th>
                                                            </tr>
                                                                    </table>
                                                                                                                        
                                                                    
                                                                </div>
                                                                <div class="form-group col-md-4 mb-2">
                                                                    <table>
                                                                        <tr>
                                                                            <th class="pad-14">
                                                                            <label for="userinput2">Vendor Email ID</label>
                                                                        </th>
                                                                        <th class="pad-14">
                                                                            {{poqutation.vendor_emailid}}   
                                                                        </th>
                                                                    </tr>
                                                                    <tr><th class="pad-14">
                                                                        <label for="userinput2">Quotation Doc</label>
                                                                    </th>
                                                                    <th class="pad-14">
                                                                        <a class="text-primary cursor-pointer" href="{{CS.getUploadedFileNativePath()}}{{poqutation.quotationfile_name}}" target="_blank">{{poqutation.quotationfile_name}}</a>
                                                                    </th>
                                                                </tr>                                                               
                                                                    </table>
                                                                
                                                                </div>
                                                            </div>
                                                                <div class="row pad-14">
                                                                    <table class="table table-striped table-bordered">
                                                                            <thead>
                                                                                    <tr class="bg-light-gray2">
                                                                                            <th class="th-sm">
                                                                                                    Material/Service Name
                                                                                            </th>
                                                                                            <th class="th-sm">
                                                                                                    Description
                                                                                            </th>
                                                                                            <th class="th-sm">
                                                                                                    Quantity
                                                                                            </th>
                                                                                            <th class="th-sm">
                                                                                                    Approx Unit Value
                                                                                            </th>
                                                                                            <th class="th-sm">
                                                                                                    Approx Total Value
                                                                                            </th>
                                                                                    </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                        *ngFor="let cost of poqutation.quotation; let i = index">
                                                                                        <td>                                                                              
                                                                                                <label>{{cost.vendor_material_name}}</label>                                                              
                                                                                        </td>
                                                                                        <td>
                                                                                            <label>{{cost.vendor_line_description}}</label>
                                                                                              
                                                                                        </td>
                                                                                         <td>
                                                                                            <label>{{cost.vendor_quantity}}</label>
                                                                                        </td>
                                                                                        <td>                                                                              
                                                                                            <label>{{cost.vendor_unit_value}}</label>                                                                    
                                                                                        </td>
                                
                                                                                        <td>
                                                                                            <label>{{cost.vendor_total_value}}</label>  
                                                                                        </td>                                                      
                                                                                </tr>
                                                                               
                                                                        </tbody>
                                                                    </table>
                                                            </div>                                                  
                                                      </div>
                                                      </div>
                                                    </div>  
                                                  
                                                <div class="row">
                                                    <div class="col-3">
                                                        <button type="submit" class="btn btn-raised btn-info btn-min-width mr-1 "
                                                        (click)="openModal()"> Approve
                                                        </button>
                                                    </div>
                                                  
                                                </div>

                                           

                                    </div>



                                </div>
                            </div>
                        
                     
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    </div>




    
                                    
<!-- Approval Reject Action Modal -->

<div class="modal" id="modal_approval">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Transaction Approval</h4>
          <button type="button" (click)="closemodel()" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">

                <h5>Approve or Reject this request using the options.</h5>

                <p class="text-danger">Note: The action cannot be revert once it was done.</p>

                <div class="form-group ">                            
                    <label for="userinput1">Remarks </label>
                    <textarea class="form-control bg-transparent" [(ngModel)]="comment"
                    name="comment" id="comment"  maxlength="500"></textarea>                                         
                </div>

            <div class="row mt-5">
                <div class="form-group col-md-4 mb-2">
                    <div class="text-right">
                        <button type="submit" class="btn  btn-info  mr-1 mb-1" data-dismiss="modal" aria-label="Close" class="btn btn-raised btn-info btn-min-width mr-1 "
                            (click)="approveorder(1);"><i class="fa fa-check-square-o"></i>
                            Approve</button>
                    </div>
                </div>
                <div class="form-group col-md-4 mb-2">
                  
                        <button type="submit" class="btn  btn-warning  mr-1 mb-1" data-dismiss="modal" aria-label="Close" class="btn btn-raised btn-warning btn-min-width mr-1 "
                            (click)="approveorder(2);"><i class="fa fa-check-square-o"></i>
                            Hold</button>
                
                </div>
                <div class="form-group col-md-4 mb-2">
                    <div class="text-left">
                        <button type="submit" class="btn  btn-info  mr-1 mb-1" data-dismiss="modal" aria-label="Close" class="btn btn-danger btn-min-width mr-1 "
                            (click)="approveorder(3);"><i class="fa fa-check-square-o"></i>
                            Reject</button>
                    </div>
                </div>
            
            </div>

        </div>
    </div>
  </div>
</div>
<!-- Approval Reject Action Modal End-->
    